(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{4073:function(e,t,a){Promise.resolve().then(a.bind(a,3510))},3510:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(7573),r=a(7653),l=a(4313);let o=(0,l.Z)("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]);var n=a(6673),i=a(3919),c=a(997);let d=(0,l.Z)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),h=(0,l.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var u=a(3029),m=a(3896),x=a(1733),f=a(8623),p=a(6065),b=a(3868),g=a(5118),w=a(6741),j=a(8146);function y(){let{user:e}=(0,w.a)(),[t,a]=(0,r.useState)(null),[l,y]=(0,r.useState)("idle"),[N,k]=(0,r.useState)(null),[v,S]=(0,r.useState)(0),[P,T]=(0,r.useState)(null),[O,C]=(0,r.useState)(null),[E,F]=(0,r.useState)(!1),[I,A]=(0,r.useState)(""),[D,Z]=(0,r.useState)("text"),[J,M]=(0,r.useState)(null),[L,R]=(0,r.useState)("center");(0,r.useEffect)(()=>{if(!N||"processing"!==l)return;let e=setInterval(async()=>{try{let e=await g.h.getJobStatus(N);if(S(e.progress),"COMPLETED"===e.status){if(y("completed"),e.outputFiles&&e.outputFiles.length>0){let t=await g.h.getDownloadUrl(e.outputFiles[0].id);C(t)}}else"FAILED"===e.status&&(y("error"),T(e.error||"Processing failed"))}catch(e){console.error("Error polling job status:",e),T("Failed to check job status"),y("error")}},1e3);return()=>clearInterval(e)},[N,l]);let B=(0,r.useCallback)(async e=>{if(0!==e.length){F(!0),T(null);try{let t=await g.h.uploadFile(e[0]);a(t)}catch(e){T(e instanceof Error?e.message:"Upload failed")}finally{F(!1)}}},[]),{getRootProps:U,getInputProps:W,isDragActive:z}=(0,b.uI)({onDrop:B,accept:{"application/pdf":[".pdf"]},maxFiles:1,maxSize:52428800}),_=async()=>{if(t&&("text"!==D||I)&&("image"!==D||J)){y("processing"),S(0),T(null);try{let e;"image"===D&&J&&(e=(await g.h.uploadFile(J)).id);let a=await g.h.watermarkPdf(t.id,I||" ",{type:D,watermarkFileId:e,position:L});k(a.jobId)}catch(e){y("error"),T(e instanceof Error?e.message:"Failed to apply watermark")}}},q=(0,r.useCallback)(e=>{e.length>0&&M(e[0])},[]),{getRootProps:V,getInputProps:G,isDragActive:H}=(0,b.uI)({onDrop:q,accept:{"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"]},maxFiles:1,maxSize:5242880}),K=()=>{a(null),y("idle"),k(null),S(0),T(null),C(null),A(""),Z("text"),M(null),R("center")};return(0,s.jsx)("div",{className:"min-h-screen py-12 bg-gradient-to-b from-blue-50 to-white",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,s.jsxs)("div",{className:"text-center mb-10",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-500/25",children:(0,s.jsx)(o,{className:"w-10 h-10 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Watermark PDF"}),(0,s.jsx)("p",{className:"mt-3 text-lg text-slate-600",children:"Add text watermark to your PDF documents"})]}),(0,s.jsx)("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100",children:(0,s.jsxs)("div",{className:"p-8",children:["idle"===l&&!t&&(0,s.jsxs)("div",{...U(),className:"border-2 border-dashed rounded-2xl p-10 text-center cursor-pointer transition-colors ".concat(z?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-500 hover:bg-slate-50"),children:[(0,s.jsx)("input",{...W()}),(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(n.Z,{className:"w-8 h-8 text-blue-600"})}),(0,s.jsx)("p",{className:"text-lg font-medium text-slate-900",children:z?"Drop PDF here":"Drop PDF file here"}),(0,s.jsx)("p",{className:"mt-2 text-slate-500",children:"or click to browse"}),(0,s.jsx)("p",{className:"mt-4 text-xs text-slate-400",children:"Up to 50MB"})]}),E&&(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)(i.Z,{className:"w-10 h-10 text-blue-600 animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium text-slate-900",children:"Uploading..."})]}),t&&"idle"===l&&!E&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center shrink-0",children:(0,s.jsx)(n.Z,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 truncate",children:t.originalName}),(0,s.jsxs)("p",{className:"text-sm text-slate-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}),(0,s.jsx)("button",{onClick:K,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors text-slate-500 hover:text-red-500",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[(0,s.jsxs)("button",{onClick:()=>Z("text"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all ".concat("text"===D?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[(0,s.jsx)(d,{className:"w-4 h-4"}),"Text"]}),(0,s.jsxs)("button",{onClick:()=>Z("image"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all ".concat("image"===D?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[(0,s.jsx)(h,{className:"w-4 h-4"}),"Image"]})]}),"text"===D&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Watermark Text"}),(0,s.jsx)("input",{type:"text",value:I,onChange:e=>A(e.target.value),placeholder:"e.g., CONFIDENTIAL, DRAFT",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-slate-900 placeholder:text-slate-400"})]}),"image"===D&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload Watermark Image"}),J?(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center shrink-0 overflow-hidden",children:(0,s.jsx)("img",{src:URL.createObjectURL(J),alt:"Watermark preview",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900 truncate",children:J.name}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:[(J.size/1024).toFixed(1)," KB"]})]}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),M(null)},className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors text-slate-500 hover:text-red-500",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]}):(0,s.jsxs)("div",{...V(),className:"border-2 border-dashed rounded-xl p-6 text-center cursor-pointer transition-colors ".concat(H?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-500 hover:bg-slate-50"),children:[(0,s.jsx)("input",{...G()}),(0,s.jsx)(h,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Drop image here or click to browse"}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"PNG, JPG up to 5MB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Position"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 max-w-[200px] mx-auto",children:[{id:"top-left",label:"TL"},{id:"top-center",label:"TC"},{id:"top-right",label:"TR"},{id:"center-left",label:"CL"},{id:"center",label:"C"},{id:"center-right",label:"CR"},{id:"bottom-left",label:"BL"},{id:"bottom-center",label:"BC"},{id:"bottom-right",label:"BR"}].map(e=>(0,s.jsx)("button",{onClick:()=>R(e.id),className:"aspect-square rounded-lg border flex items-center justify-center text-xs font-medium transition-all ".concat(L===e.id?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-500 border-slate-200 hover:border-blue-400 hover:text-blue-500"),children:e.label},e.id))})]})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("button",{onClick:_,disabled:"text"===D?!I:!J,className:"flex items-center gap-2 px-8 py-4 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/25 ".concat(("text"===D?I:J)?"":"opacity-50 cursor-not-allowed"),children:["Apply Watermark",(0,s.jsx)(u.Z,{className:"w-5 h-5"})]})})]}),"processing"===l&&(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)(i.Z,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-6"}),(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Adding Watermark..."}),(0,s.jsx)("p",{className:"text-slate-500 mb-6",children:"Processing your document"}),(0,s.jsx)("div",{className:"w-full max-w-md mx-auto h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-300 rounded-full",style:{width:"".concat(v,"%")}})}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-slate-500",children:[v,"%"]})]}),"completed"===l&&O&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(m.Z,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Watermark Added!"}),(0,s.jsx)("p",{className:"text-slate-500 mb-8",children:"Your document is ready"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,s.jsxs)("button",{onClick:()=>{(null==O?void 0:O.url)&&window.open(O.url,"_blank")},className:"flex items-center justify-center gap-2 px-8 py-4 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/25",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),"Download PDF"]}),(0,s.jsxs)("button",{onClick:K,className:"flex items-center justify-center gap-2 px-8 py-4 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5"}),"Watermark Another"]})]})]}),"error"===l&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(p.Z,{className:"w-8 h-8 text-red-600"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Failed to Watermark"}),(0,s.jsx)("p",{className:"text-red-600 mb-8",children:P}),(0,s.jsx)("button",{onClick:K,className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors",children:"Try Again"})]})]})}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsx)(j.default,{href:"/",className:"text-slate-500 hover:text-blue-600 font-medium transition-colors",children:"â† Back to all tools"})})]})})}},6741:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return n},a:function(){return i}});var s=a(7573),r=a(7653);let l=(0,r.createContext)(void 0),o="http://localhost:4000";function n(e){let{children:t}=e,[a,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("accessToken");e?(c(e),u(e)):h(!1)},[]);let u=async e=>{try{let t=await fetch("".concat(o,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e)}else localStorage.removeItem("accessToken"),c(null)}catch(e){console.error("Failed to fetch user:",e)}finally{h(!1)}},m=async(e,t)=>{let a=await fetch("".concat(o,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok)throw Error((await a.json()).message||"Login failed");let s=await a.json();localStorage.setItem("accessToken",s.accessToken),c(s.accessToken),n(s.user)},x=async(e,t,a)=>{let s=await fetch("".concat(o,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:a})});if(!s.ok)throw Error((await s.json()).message||"Registration failed");let r=await s.json();localStorage.setItem("accessToken",r.accessToken),c(r.accessToken),n(r.user)};return(0,s.jsx)(l.Provider,{value:{user:a,token:i,login:m,register:x,logout:()=>{localStorage.removeItem("accessToken"),c(null),n(null)},isLoading:d},children:t})}function i(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5118:function(e,t,a){"use strict";a.d(t,{h:function(){return o}});let s="http://localhost:4000";function r(){let e=localStorage.getItem("accessToken"),t={"Content-Type":"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t}class l{async uploadFile(e){let t=new FormData;t.append("file",e);let a=localStorage.getItem("accessToken"),r={};a&&(r.Authorization="Bearer ".concat(a));let l=await fetch("".concat(s,"/api/files/upload"),{method:"POST",headers:r,body:t});if(!l.ok)throw Error((await l.json().catch(()=>({}))).message||"Upload failed");return l.json()}async uploadMultiple(e){let t=new FormData;e.forEach(e=>t.append("files",e));let a=localStorage.getItem("accessToken"),r={};a&&(r.Authorization="Bearer ".concat(a));let l=await fetch("".concat(s,"/api/files/upload-multiple"),{method:"POST",headers:r,body:t});if(!l.ok)throw Error((await l.json().catch(()=>({}))).message||"Upload failed");return l.json()}async getDownloadUrl(e){let t=await fetch("".concat(s,"/api/files/").concat(e,"/download"),{headers:r()});if(!t.ok)throw Error("Failed to get download URL");return t.json()}async getJobStatus(e){let t=await fetch("".concat(s,"/api/jobs/").concat(e),{headers:r()});if(!t.ok)throw Error("Failed to get job status");return t.json()}async mergePdfs(e){let t=await fetch("".concat(s,"/api/tools/merge"),{method:"POST",headers:r(),body:JSON.stringify({fileIds:e})});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"Merge request failed");return t.json()}async splitPdf(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=await fetch("".concat(s,"/api/tools/split"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,mode:t,...a})});if(!l.ok)throw Error((await l.json().catch(()=>({}))).message||"Split request failed");return l.json()}async compressPdf(e,t){let a=await fetch("".concat(s,"/api/tools/compress"),{method:"POST",headers:r(),body:JSON.stringify({fileIds:e,level:t})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Compress request failed");return a.json()}async rotatePdf(e,t,a){let l=await fetch("".concat(s,"/api/tools/rotate"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,rotation:t,pageNumbers:a})});if(!l.ok)throw Error((await l.json().catch(()=>({}))).message||"Rotate request failed");return l.json()}async reorderPdf(e,t){let a=await fetch("".concat(s,"/api/tools/reorder"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,limit_order:t})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Reorder request failed");return a.json()}async pdfToWord(e){let t=await fetch("".concat(s,"/api/tools/pdf-to-word"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e})});if(!t.ok)throw Error("Conversion failed");return t.json()}async wordToPdf(e){let t=await fetch("".concat(s,"/api/tools/word-to-pdf"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e})});if(!t.ok)throw Error("Conversion failed");return t.json()}async ocr(e,t){let a=await fetch("".concat(s,"/api/tools/ocr"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,language:t})});if(!a.ok)throw Error("OCR failed");return a.json()}async pdfToImage(e,t,a){let l=await fetch("".concat(s,"/api/tools/pdf-to-image"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,format:t,dpi:a})});if(!l.ok)throw Error("Conversion failed");return l.json()}async protectPdf(e,t,a){let l=await fetch("".concat(s,"/api/tools/protect"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,password:t,ownerPassword:a})});if(!l.ok)throw Error("Protection failed");return l.json()}async unlockPdf(e,t){let a=await fetch("".concat(s,"/api/tools/unlock"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,password:t})});if(!a.ok)throw Error("Unlock failed");return a.json()}async watermarkPdf(e,t,a){let l=await fetch("".concat(s,"/api/tools/watermark"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,text:t,...a})});if(!l.ok)throw Error("Watermark failed");return l.json()}async signPdf(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"handwritten",l=await fetch("".concat(s,"/api/tools/sign"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,text:t,style:a})});if(!l.ok)throw Error("Signing failed");return l.json()}}let o=new l},8623:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(4313).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},997:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(4313).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8146:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(6340),r=a.n(s)}},function(e){e.O(0,[340,116,293,528,744],function(){return e(e.s=4073)}),_N_E=e.O()}]);