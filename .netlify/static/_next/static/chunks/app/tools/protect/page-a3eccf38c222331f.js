(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{1077:function(e,t,s){Promise.resolve().then(s.bind(s,8472))},8472:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7573),o=s(7653),r=s(7686),l=s(6673),n=s(3919),c=s(997),i=s(844),d=s(8333),h=s(6751),u=s(3029),f=s(3896),m=s(1733),x=s(8623),p=s(6065),w=s(3868),y=s(5118),g=s(6741),j=s(8146);function b(){let{user:e}=(0,g.a)(),[t,s]=(0,o.useState)(null),[b,N]=(0,o.useState)("idle"),[k,v]=(0,o.useState)(null),[S,P]=(0,o.useState)(0),[T,E]=(0,o.useState)(null),[O,Z]=(0,o.useState)(null),[C,F]=(0,o.useState)(!1),[M,D]=(0,o.useState)(""),[J,I]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!k||"processing"!==b)return;let e=setInterval(async()=>{try{let e=await y.h.getJobStatus(k);if(P(e.progress),"COMPLETED"===e.status){if(N("completed"),e.outputFiles&&e.outputFiles.length>0){let t=await y.h.getDownloadUrl(e.outputFiles[0].id);Z(t)}}else"FAILED"===e.status&&(N("error"),E(e.error||"Processing failed"))}catch(e){console.error("Error polling job status:",e),E("Failed to check job status"),N("error")}},1e3);return()=>clearInterval(e)},[k,b]);let A=(0,o.useCallback)(async e=>{if(0!==e.length){F(!0),E(null);try{let t=await y.h.uploadFile(e[0]);s(t)}catch(e){E(e instanceof Error?e.message:"Upload failed")}finally{F(!1)}}},[]),{getRootProps:z,getInputProps:U,isDragActive:_}=(0,w.uI)({onDrop:A,accept:{"application/pdf":[".pdf"]},maxFiles:1,maxSize:52428800}),q=async()=>{if(t&&M){N("processing"),P(0),E(null);try{let e=await y.h.protectPdf(t.id,M);v(e.jobId)}catch(e){N("error"),E(e instanceof Error?e.message:"Failed to start protection")}}},B=()=>{s(null),N("idle"),v(null),P(0),E(null),Z(null),D("")};return(0,a.jsx)("div",{className:"min-h-screen py-12 bg-gradient-to-b from-rose-50 to-white",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-rose-500 to-rose-600 flex items-center justify-center mx-auto mb-6 shadow-lg shadow-rose-500/25",children:(0,a.jsx)(r.Z,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Protect PDF"}),(0,a.jsx)("p",{className:"mt-3 text-lg text-slate-600",children:"Encrypt your PDF with a password"})]}),(0,a.jsx)("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100",children:(0,a.jsxs)("div",{className:"p-8",children:["idle"===b&&!t&&(0,a.jsxs)("div",{...z(),className:"border-2 border-dashed rounded-2xl p-10 text-center cursor-pointer transition-colors ".concat(_?"border-rose-500 bg-rose-50":"border-slate-200 hover:border-rose-500 hover:bg-slate-50"),children:[(0,a.jsx)("input",{...U()}),(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-rose-100 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-rose-600"})}),(0,a.jsx)("p",{className:"text-lg font-medium text-slate-900",children:_?"Drop PDF here":"Drop PDF file here"}),(0,a.jsx)("p",{className:"mt-2 text-slate-500",children:"or click to browse"}),(0,a.jsx)("p",{className:"mt-4 text-xs text-slate-400",children:"Up to 50MB"})]}),C&&(0,a.jsxs)("div",{className:"text-center py-10",children:[(0,a.jsx)(n.Z,{className:"w-10 h-10 text-rose-600 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium text-slate-900",children:"Uploading..."})]}),t&&"idle"===b&&!C&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg bg-rose-100 flex items-center justify-center shrink-0",children:(0,a.jsx)(l.Z,{className:"w-6 h-6 text-rose-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-slate-900 truncate",children:t.originalName}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)("button",{onClick:B,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors text-slate-500 hover:text-red-500",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Set Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:J?"text":"password",value:M,onChange:e=>D(e.target.value),placeholder:"Enter strong password",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-rose-500 outline-none transition-all pr-12 text-slate-900 placeholder:text-slate-400"}),(0,a.jsx)("button",{type:"button",onClick:()=>I(!J),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-slate-600 transition-colors",children:J?(0,a.jsx)(i.Z,{className:"w-5 h-5"}):(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-slate-500 flex items-center gap-1",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3"}),"Make sure to remember this password"]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("button",{onClick:q,disabled:!M,className:"flex items-center gap-2 px-8 py-4 bg-rose-600 text-white rounded-xl font-semibold hover:bg-rose-700 transition-colors shadow-lg shadow-rose-500/25 ".concat(M?"":"opacity-50 cursor-not-allowed"),children:["Protect PDF",(0,a.jsx)(u.Z,{className:"w-5 h-5"})]})})]}),"processing"===b&&(0,a.jsxs)("div",{className:"text-center py-10",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 text-rose-600 animate-spin mx-auto mb-6"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Protecting PDF..."}),(0,a.jsx)("p",{className:"text-slate-500 mb-6",children:"Encrypting your document"}),(0,a.jsx)("div",{className:"w-full max-w-md mx-auto h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-rose-600 transition-all duration-300 rounded-full",style:{width:"".concat(S,"%")}})}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-slate-500",children:[S,"%"]})]}),"completed"===b&&O&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(f.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Protection Complete!"}),(0,a.jsx)("p",{className:"text-slate-500 mb-8",children:"Your PDF is now password protected"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsxs)("button",{onClick:()=>{(null==O?void 0:O.url)&&window.open(O.url,"_blank")},className:"flex items-center justify-center gap-2 px-8 py-4 bg-rose-600 text-white rounded-xl font-semibold hover:bg-rose-700 transition-colors shadow-lg shadow-rose-500/25",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5"}),"Download Protected PDF"]}),(0,a.jsxs)("button",{onClick:B,className:"flex items-center justify-center gap-2 px-8 py-4 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Protect Another"]})]})]}),"error"===b&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(p.Z,{className:"w-8 h-8 text-red-600"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Protection Failed"}),(0,a.jsx)("p",{className:"text-red-600 mb-8",children:T}),(0,a.jsx)("button",{onClick:B,className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors",children:"Try Again"})]})]})}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)(j.default,{href:"/",className:"text-slate-500 hover:text-rose-600 font-medium transition-colors",children:"â† Back to all tools"})})]})})}},6741:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return n},a:function(){return c}});var a=s(7573),o=s(7653);let r=(0,o.createContext)(void 0),l="http://localhost:4000";function n(e){let{children:t}=e,[s,n]=(0,o.useState)(null),[c,i]=(0,o.useState)(null),[d,h]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=localStorage.getItem("accessToken");e?(i(e),u(e)):h(!1)},[]);let u=async e=>{try{let t=await fetch("".concat(l,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e)}else localStorage.removeItem("accessToken"),i(null)}catch(e){console.error("Failed to fetch user:",e)}finally{h(!1)}},f=async(e,t)=>{let s=await fetch("".concat(l,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error((await s.json()).message||"Login failed");let a=await s.json();localStorage.setItem("accessToken",a.accessToken),i(a.accessToken),n(a.user)},m=async(e,t,s)=>{let a=await fetch("".concat(l,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:s})});if(!a.ok)throw Error((await a.json()).message||"Registration failed");let o=await a.json();localStorage.setItem("accessToken",o.accessToken),i(o.accessToken),n(o.user)};return(0,a.jsx)(r.Provider,{value:{user:s,token:c,login:f,register:m,logout:()=>{localStorage.removeItem("accessToken"),i(null),n(null)},isLoading:d},children:t})}function c(){let e=(0,o.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5118:function(e,t,s){"use strict";s.d(t,{h:function(){return l}});let a="http://localhost:4000";function o(){let e=localStorage.getItem("accessToken"),t={"Content-Type":"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t}class r{async uploadFile(e){let t=new FormData;t.append("file",e);let s=localStorage.getItem("accessToken"),o={};s&&(o.Authorization="Bearer ".concat(s));let r=await fetch("".concat(a,"/api/files/upload"),{method:"POST",headers:o,body:t});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Upload failed");return r.json()}async uploadMultiple(e){let t=new FormData;e.forEach(e=>t.append("files",e));let s=localStorage.getItem("accessToken"),o={};s&&(o.Authorization="Bearer ".concat(s));let r=await fetch("".concat(a,"/api/files/upload-multiple"),{method:"POST",headers:o,body:t});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Upload failed");return r.json()}async getDownloadUrl(e){let t=await fetch("".concat(a,"/api/files/").concat(e,"/download"),{headers:o()});if(!t.ok)throw Error("Failed to get download URL");return t.json()}async getJobStatus(e){let t=await fetch("".concat(a,"/api/jobs/").concat(e),{headers:o()});if(!t.ok)throw Error("Failed to get job status");return t.json()}async mergePdfs(e){let t=await fetch("".concat(a,"/api/tools/merge"),{method:"POST",headers:o(),body:JSON.stringify({fileIds:e})});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"Merge request failed");return t.json()}async splitPdf(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=await fetch("".concat(a,"/api/tools/split"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,mode:t,...s})});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Split request failed");return r.json()}async compressPdf(e,t){let s=await fetch("".concat(a,"/api/tools/compress"),{method:"POST",headers:o(),body:JSON.stringify({fileIds:e,level:t})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"Compress request failed");return s.json()}async rotatePdf(e,t,s){let r=await fetch("".concat(a,"/api/tools/rotate"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,rotation:t,pageNumbers:s})});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Rotate request failed");return r.json()}async reorderPdf(e,t){let s=await fetch("".concat(a,"/api/tools/reorder"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,limit_order:t})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"Reorder request failed");return s.json()}async pdfToWord(e){let t=await fetch("".concat(a,"/api/tools/pdf-to-word"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e})});if(!t.ok)throw Error("Conversion failed");return t.json()}async wordToPdf(e){let t=await fetch("".concat(a,"/api/tools/word-to-pdf"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e})});if(!t.ok)throw Error("Conversion failed");return t.json()}async ocr(e,t){let s=await fetch("".concat(a,"/api/tools/ocr"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,language:t})});if(!s.ok)throw Error("OCR failed");return s.json()}async pdfToImage(e,t,s){let r=await fetch("".concat(a,"/api/tools/pdf-to-image"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,format:t,dpi:s})});if(!r.ok)throw Error("Conversion failed");return r.json()}async protectPdf(e,t,s){let r=await fetch("".concat(a,"/api/tools/protect"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,password:t,ownerPassword:s})});if(!r.ok)throw Error("Protection failed");return r.json()}async unlockPdf(e,t){let s=await fetch("".concat(a,"/api/tools/unlock"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,password:t})});if(!s.ok)throw Error("Unlock failed");return s.json()}async watermarkPdf(e,t,s){let r=await fetch("".concat(a,"/api/tools/watermark"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,text:t,...s})});if(!r.ok)throw Error("Watermark failed");return r.json()}async signPdf(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"handwritten",r=await fetch("".concat(a,"/api/tools/sign"),{method:"POST",headers:o(),body:JSON.stringify({fileId:e,text:t,style:s})});if(!r.ok)throw Error("Signing failed");return r.json()}}let l=new r},844:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4313).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},8333:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4313).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6751:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4313).Z)("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]])},7686:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4313).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},8623:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4313).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},997:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(4313).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8146:function(e,t,s){"use strict";s.d(t,{default:function(){return o.a}});var a=s(6340),o=s.n(a)}},function(e){e.O(0,[340,116,293,528,744],function(){return e(e.s=1077)}),_N_E=e.O()}]);