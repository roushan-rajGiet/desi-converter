(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{4779:function(e,t,s){Promise.resolve().then(s.bind(s,376))},376:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7573),r=s(7653),o=s(9997),l=s(3919),n=s(3029),i=s(3896),c=s(1733),d=s(6065),h=s(3868),m=s(4699),u=s(5995),f=s(5118),x=s(144),g=s(6825),p=s(6673),w=s(269);function b(e){var t;let{file:s,index:r,onRemove:o}=e,{attributes:l,listeners:n,setNodeRef:i,transform:c,transition:d,isDragging:h}=(0,u.nB)({id:s.id}),m={transform:x.ux.Transform.toString(c),transition:d,zIndex:h?10:1,opacity:h?.5:1};return(0,a.jsxs)("div",{ref:i,style:m,className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl group border ".concat(h?"border-blue-500 shadow-lg":"border-transparent"),children:[(0,a.jsx)("div",{...l,...n,className:"cursor-grab active:cursor-grabbing p-1 text-slate-400 hover:text-slate-600",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})}),(0,a.jsx)("div",{className:"w-6 h-6 rounded bg-blue-100 text-blue-600 flex items-center justify-center text-sm font-medium",children:r+1}),(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(p.Z,{className:"w-5 h-5 text-red-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-slate-700 truncate",children:s.originalName}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:(t=s.size)<1048576?"".concat((t/1024).toFixed(1)," KB"):"".concat((t/1048576).toFixed(1)," MB")})]}),(0,a.jsx)("button",{onClick:()=>o(s.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:(0,a.jsx)(w.Z,{className:"w-5 h-5"})})]})}var j=s(6741),y=s(8146);function N(){let{user:e}=(0,j.a)(),[t,s]=(0,r.useState)([]),[x,g]=(0,r.useState)("idle"),[p,w]=(0,r.useState)(null),[N,v]=(0,r.useState)(0),[S,k]=(0,r.useState)(null),[P,T]=(0,r.useState)(null),[O,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!p||"processing"!==x)return;let e=setInterval(async()=>{try{let e=await f.h.getJobStatus(p);if(v(e.progress),"COMPLETED"===e.status){if(g("completed"),e.outputFiles&&e.outputFiles.length>0){let t=await f.h.getDownloadUrl(e.outputFiles[0].id);T(t)}}else"FAILED"===e.status&&(g("error"),k(e.error||"Processing failed"))}catch(e){console.error("Error polling job status:",e)}},1e3);return()=>clearInterval(e)},[p,x]);let F=(0,r.useCallback)(async e=>{if(0!==e.length){E(!0),k(null);try{let t=await f.h.uploadMultiple(e);s(e=>[...e,...t])}catch(e){k(e instanceof Error?e.message:"Upload failed")}finally{E(!1)}}},[]),{getRootProps:D,getInputProps:C,isDragActive:I}=(0,h.uI)({onDrop:F,accept:{"application/pdf":[".pdf"]},maxFiles:20,maxSize:26214400}),J=e=>{s(t=>t.filter(t=>t.id!==e))},M=(0,m.Dy)((0,m.VT)(m.we),(0,m.VT)(m.Lg,{coordinateGetter:u.is})),Z=async()=>{if(t.length<2){k("Please upload at least 2 PDF files to merge");return}g("processing"),v(0),k(null);try{let e=await f.h.mergePdfs(t.map(e=>e.id));w(e.jobId)}catch(e){g("error"),k(e instanceof Error?e.message:"Failed to start merge")}},A=()=>{s([]),g("idle"),w(null),v(0),k(null),T(null)};return(0,a.jsx)("div",{className:"min-h-screen py-12 bg-gradient-to-b from-blue-50 to-white",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-500/25",children:(0,a.jsx)(o.Z,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Merge PDF"}),(0,a.jsx)("p",{className:"mt-3 text-lg text-slate-600",children:"Combine multiple PDF files into a single document"}),!e&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-slate-500",children:[(0,a.jsx)(y.default,{href:"/auth/login",className:"text-primary-600 hover:underline",children:"Sign in"})," to save your files"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-slate-100",children:["idle"===x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{...D(),className:"relative border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all ".concat(I?"border-blue-500 bg-blue-50":"border-slate-300 hover:border-blue-400 hover:bg-slate-50"),children:[(0,a.jsx)("input",{...C()}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[O?(0,a.jsx)(l.Z,{className:"w-12 h-12 text-blue-500 animate-spin"}):(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium text-slate-700",children:I?"Drop PDFs here...":"Drag & drop PDFs here"}),(0,a.jsxs)("p",{className:"text-slate-500 mt-1",children:["or ",(0,a.jsx)("span",{className:"text-blue-600 font-medium",children:"browse files"})]})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Max 25MB per file â€¢ Up to 20 files"})]})]}),S&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-red-50 text-red-600 rounded-xl text-sm",children:S}),t.length>0&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-slate-900",children:[t.length," file",1!==t.length?"s":""," selected"]}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Drag to reorder"})]}),(0,a.jsx)(m.LB,{sensors:M,collisionDetection:m.pE,onDragEnd:e=>{let{active:t,over:a}=e;a&&t.id!==a.id&&s(e=>{let s=e.findIndex(e=>e.id===t.id),r=e.findIndex(e=>e.id===a.id);return(0,u.Rp)(e,s,r)})},children:(0,a.jsx)(u.Fo,{items:t.map(e=>e.id),strategy:u.qw,children:(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>(0,a.jsx)(b,{file:e,index:t,onRemove:J},e.id))})})}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsxs)("button",{onClick:Z,disabled:t.length<2,className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-blue-700 transition-all hover-lift shadow-lg shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed",children:["Merge ",t.length," PDFs",(0,a.jsx)(n.Z,{className:"w-5 h-5"})]})})]})]}),"processing"===x&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(l.Z,{className:"w-16 h-16 text-blue-500 animate-spin mx-auto mb-6"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:"Merging PDFs..."}),(0,a.jsxs)("div",{className:"mt-4 max-w-xs mx-auto",children:[(0,a.jsx)("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:"".concat(N,"%")}})}),(0,a.jsxs)("p",{className:"mt-2 text-slate-500",children:[N,"% complete"]})]})]}),"completed"===x&&P&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(i.Z,{className:"w-10 h-10 text-green-600"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:"Merge Complete!"}),(0,a.jsx)("p",{className:"mt-2 text-slate-600",children:"Your merged PDF is ready to download"}),(0,a.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsxs)("button",{onClick:()=>{(null==P?void 0:P.url)&&window.open(P.url,"_blank")},className:"inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all hover-lift shadow-lg shadow-green-500/25",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5"}),"Download PDF"]}),(0,a.jsx)("button",{onClick:A,className:"px-8 py-4 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors",children:"Merge More Files"})]})]}),"error"===x&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(d.Z,{className:"w-10 h-10 text-red-600"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:"Something went wrong"}),(0,a.jsx)("p",{className:"mt-2 text-red-600",children:S}),(0,a.jsx)("button",{onClick:A,className:"mt-8 px-8 py-4 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors",children:"Try Again"})]})]}),(0,a.jsx)("div",{className:"mt-12 grid md:grid-cols-3 gap-6",children:[{step:"1",title:"Upload PDFs",desc:"Drag and drop or browse to select multiple PDF files"},{step:"2",title:"Reorder",desc:"Arrange files in the order you want them merged"},{step:"3",title:"Download",desc:"Click merge and download your combined PDF"}].map(e=>(0,a.jsxs)("div",{className:"text-center p-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 font-bold flex items-center justify-center mx-auto mb-4",children:e.step}),(0,a.jsx)("h4",{className:"font-semibold text-slate-900",children:e.title}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:e.desc})]},e.step))})]})})}},6741:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return n},a:function(){return i}});var a=s(7573),r=s(7653);let o=(0,r.createContext)(void 0),l="http://localhost:4000";function n(e){let{children:t}=e,[s,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("accessToken");e?(c(e),m(e)):h(!1)},[]);let m=async e=>{try{let t=await fetch("".concat(l,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e)}else localStorage.removeItem("accessToken"),c(null)}catch(e){console.error("Failed to fetch user:",e)}finally{h(!1)}},u=async(e,t)=>{let s=await fetch("".concat(l,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error((await s.json()).message||"Login failed");let a=await s.json();localStorage.setItem("accessToken",a.accessToken),c(a.accessToken),n(a.user)},f=async(e,t,s)=>{let a=await fetch("".concat(l,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:s})});if(!a.ok)throw Error((await a.json()).message||"Registration failed");let r=await a.json();localStorage.setItem("accessToken",r.accessToken),c(r.accessToken),n(r.user)};return(0,a.jsx)(o.Provider,{value:{user:s,token:i,login:u,register:f,logout:()=>{localStorage.removeItem("accessToken"),c(null),n(null)},isLoading:d},children:t})}function i(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5118:function(e,t,s){"use strict";s.d(t,{h:function(){return l}});let a="http://localhost:4000";function r(){let e=localStorage.getItem("accessToken"),t={"Content-Type":"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t}class o{async uploadFile(e){let t=new FormData;t.append("file",e);let s=localStorage.getItem("accessToken"),r={};s&&(r.Authorization="Bearer ".concat(s));let o=await fetch("".concat(a,"/api/files/upload"),{method:"POST",headers:r,body:t});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||"Upload failed");return o.json()}async uploadMultiple(e){let t=new FormData;e.forEach(e=>t.append("files",e));let s=localStorage.getItem("accessToken"),r={};s&&(r.Authorization="Bearer ".concat(s));let o=await fetch("".concat(a,"/api/files/upload-multiple"),{method:"POST",headers:r,body:t});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||"Upload failed");return o.json()}async getDownloadUrl(e){let t=await fetch("".concat(a,"/api/files/").concat(e,"/download"),{headers:r()});if(!t.ok)throw Error("Failed to get download URL");return t.json()}async getJobStatus(e){let t=await fetch("".concat(a,"/api/jobs/").concat(e),{headers:r()});if(!t.ok)throw Error("Failed to get job status");return t.json()}async mergePdfs(e){let t=await fetch("".concat(a,"/api/tools/merge"),{method:"POST",headers:r(),body:JSON.stringify({fileIds:e})});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"Merge request failed");return t.json()}async splitPdf(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=await fetch("".concat(a,"/api/tools/split"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,mode:t,...s})});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||"Split request failed");return o.json()}async compressPdf(e,t){let s=await fetch("".concat(a,"/api/tools/compress"),{method:"POST",headers:r(),body:JSON.stringify({fileIds:e,level:t})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"Compress request failed");return s.json()}async rotatePdf(e,t,s){let o=await fetch("".concat(a,"/api/tools/rotate"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,rotation:t,pageNumbers:s})});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||"Rotate request failed");return o.json()}async reorderPdf(e,t){let s=await fetch("".concat(a,"/api/tools/reorder"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,limit_order:t})});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"Reorder request failed");return s.json()}async pdfToWord(e){let t=await fetch("".concat(a,"/api/tools/pdf-to-word"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e})});if(!t.ok)throw Error("Conversion failed");return t.json()}async wordToPdf(e){let t=await fetch("".concat(a,"/api/tools/word-to-pdf"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e})});if(!t.ok)throw Error("Conversion failed");return t.json()}async ocr(e,t){let s=await fetch("".concat(a,"/api/tools/ocr"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,language:t})});if(!s.ok)throw Error("OCR failed");return s.json()}async pdfToImage(e,t,s){let o=await fetch("".concat(a,"/api/tools/pdf-to-image"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,format:t,dpi:s})});if(!o.ok)throw Error("Conversion failed");return o.json()}async protectPdf(e,t,s){let o=await fetch("".concat(a,"/api/tools/protect"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,password:t,ownerPassword:s})});if(!o.ok)throw Error("Protection failed");return o.json()}async unlockPdf(e,t){let s=await fetch("".concat(a,"/api/tools/unlock"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,password:t})});if(!s.ok)throw Error("Unlock failed");return s.json()}async watermarkPdf(e,t,s){let o=await fetch("".concat(a,"/api/tools/watermark"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,text:t,...s})});if(!o.ok)throw Error("Watermark failed");return o.json()}async signPdf(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"handwritten",o=await fetch("".concat(a,"/api/tools/sign"),{method:"POST",headers:r(),body:JSON.stringify({fileId:e,text:t,style:s})});if(!o.ok)throw Error("Signing failed");return o.json()}}let l=new o}},function(e){e.O(0,[340,116,867,293,528,744],function(){return e(e.s=4779)}),_N_E=e.O()}]);